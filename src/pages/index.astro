---
import BaseLayout from "../layouts/BaseLayout.astro";
import HeroJson from "../components/HeroJson";
import DotProfile from "../components/DotProfile";
import ToolsCarousel from "../components/ToolsCarousel.astro";
import BallWave from "../components/BallWave";
import { content } from "../data/content";

const { meta, hero, bio, experience, hobbies, sectionHeaders, homeLinks } = content;
---

<BaseLayout
  title={meta.title}
  description={meta.description}
>
  <div class="profile-container">

    <section class="hero-split">
      <div class="hero-text animate-left delay-200" style="width: 100%;">
        <HeroJson 
          client:load 
          startDate={hero.startDate} 
          name={hero.json.name}
          role={hero.json.role}
          origin={hero.json.origin}
        />
      </div>
      <div class="hero-image-wrapper animate-right delay-200">
        <DotProfile client:load src={hero.image} />
      </div>
    </section>

    <section class="bio-split">
      <div class="bio-left animate-left delay-300">
        <p class="tagline" style="font-size: 1.2rem; font-weight: 500; margin-bottom: 1.5rem; color: var(--secondary-text);">
          {sectionHeaders.skills}<br><span style="font-size: 0.9em">{sectionHeaders.skillsSubtitle} <span style="display: inline-block; animation: spin 2s linear infinite;">ðŸ˜”</span></span>
        </p>
        <ToolsCarousel />
      </div>
      <div class="bio-right delay-300">
        <div class="bio-intro">         
          <div style=" color: var(--secondary-text);">
            {bio.intro.map((paragraph) => (
              <p set:html={paragraph} />
            ))}
          </div>
        </div>
      <div class="bio-links">
        <p>
          {bio.contact.text}
        </p>
        <p>          
          <a href={`mailto:${bio.contact.email}`}>Email me</a>, 
          or check me on <a href={bio.contact.social.linkedin} target="_blank">LinkedIn</a>,
          <a href={bio.contact.social.github} target="_blank">GitHub</a>,
          or even <a href={bio.contact.social.discord} target="_blank">Discord</a>
        </p>
      </div>
      </div>
    </section>

    <h2 class="section-heading animate-left delay-400" style="max-width: 800px;">
      <BallWave client:visible />
      {sectionHeaders.workExperience}
    </h2>

    <section class="experience-section animate-left delay-400">
      
      {experience.map((item) => (
        <div class="experience-item">
          <div class="experience-year">{item.year}</div>
          <div class="timeline-dot"></div>
          <div class="experience-details">
            <h3>{item.role}</h3>
            <h4>{item.company}</h4>
            <p>{item.description}</p>
            <div class="experience-bottom-line">
              {item.bottomLine}
            </div>
          </div>
        </div>
      ))}

    </section>

    <h2 class="section-heading animate-left delay-500" style="margin-bottom: 2rem;">
      <span style="color: #00ff00; animation: blink 1s step-end infinite;">&gt;</span> {sectionHeaders.outOfTerminal}
    </h2>
    <div style="margin-bottom: 2rem; color: var(--secondary-text); font-style: italic; font-size: 1.2rem;">
      {bio.tagline}
    </div>
    <div class="info-grid">
      <div class="animate-left delay-500">
        <p style="font-weight: 600; margin-bottom: 1rem;">
          {hobbies.description}
          <br/>
          <img src={hobbies.image} alt="Gaming Mode" loading="lazy" style="width: 100%; border-radius: 8px; margin: 1rem 0;" />
        </p>
      </div>
      <div class="animate-right delay-500">
        <p style="font-weight: 600; margin-bottom: 1rem;">{hobbies.vibe}</p>
        <iframe 
          style="border-radius:12px" 
          src={hobbies.spotifyEmbedUrl}
          width="100%" 
          height="80%" 
          frameBorder="0" 
          allowfullscreen="" 
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy">
        </iframe>
      </div>
    </div>

    <div class="links-grid animate-left delay-600">
      {homeLinks.map((link) => (
        <a href={link.href} class="tools-link-card" style={link.fullWidth ? "grid-column: 1 / -1;" : ""}>
          <div style="display: flex; align-items: baseline; flex-wrap: wrap;">
            <span class="tools-link-title">{link.title}</span>
            <span class="tools-link-desc">{link.desc}</span>
          </div>
          <span class="tools-link-arrow">â†’</span>
        </a>
      ))}
    </div>

  </div>
</BaseLayout>

<style>
  .links-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-top: 2rem;
  }

  @media (max-width: 768px) {
    .links-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
  }
</style>
